import{r as l,j as e,H as Oe,L as xe,a as L}from"./app--mOlotUF.js";import{C as ge,a as Xe,b as Ze,d as Ye,c as pe}from"./card-DrKRoRG0.js";import{T as We,a as qe,b as Q,c as J,d as Ge,e as W}from"./table-DH4Y0wVM.js";import{I as fe}from"./input-CBFD_EUp.js";import{u as F,c as ee,B as E}from"./app-logo-icon-KWi9P-ev.js";import{e as Re,S as je,a as ye,b as we,c as be,d as ve}from"./select-BKfzqQn2.js";import{B as Z}from"./badge-DRhZ3UKT.js";import{T as Qe,a as Je,b as te,c as se}from"./tabs-D4A_sf1C.js";import{c as et,u as tt,A as st,D as ae,R as he,t as _,X as me,a as at,b as rt,d as nt,e as ot,f as re,g as it}from"./app-layout-FdSMx8-Y.js";import{D as ct,a as lt,b as dt,c as ht,d as mt,e as ut}from"./dialog-BWgveR-S.js";import{A as Se,a as Ne,b as xt,c as gt,d as pt,e as ft,f as jt,g as yt,h as wt}from"./alert-dialog-4iD_1oex.js";import{u as bt,c as vt,a as K,b as St}from"./index-CyI_ZakN.js";import{u as Nt}from"./index-DqegC-a3.js";import{P as Y}from"./index-WelwWk4r.js";import{C as Ct}from"./chevron-left-ChBud6Zh.js";import{G as ne}from"./grid-3x3-DPdNCXX6.js";import{T as oe}from"./trash-2-C8j96Jdz.js";import{c as V}from"./index-BSgIEyps.js";import{P as Ce}from"./plus-BTB0St45.js";import{S as kt}from"./search-ByfrOm_u.js";import{S as ke}from"./square-pen-DthvVc9D.js";import{C as Rt}from"./copy-FlvoJjnw.js";/* empty css            */import"./check-BHptGlaC.js";import"./loader-circle-ddbBxRrc.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]],Dt=V("CameraOff",Mt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],q=V("Camera",Et);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],It=V("Crop",Pt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],_t=V("EllipsisVertical",Tt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],zt=V("Image",At);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Ht=V("QrCode",Bt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Vt=V("RotateCcw",Lt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Me=V("Smartphone",$t);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],De=V("Upload",Ut);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Ft=V("ZoomIn",Kt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Xt=V("ZoomOut",Ot);var Ee=["PageUp","PageDown"],Pe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ie={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},O="Slider",[ce,Zt,Yt]=et(O),[Te,Vs]=vt(O,[Yt]),[Wt,G]=Te(O),_e=l.forwardRef((a,c)=>{const{name:s,min:r=0,max:o=100,step:h=1,orientation:t="horizontal",disabled:m=!1,minStepsBetweenThumbs:p=0,defaultValue:v=[r],value:y,onValueChange:u=()=>{},onValueCommit:x=()=>{},inverted:k=!1,form:j,...N}=a,w=l.useRef(new Set),g=l.useRef(0),b=t==="horizontal"?qt:Gt,[f=[],M]=bt({prop:y,defaultProp:v,onChange:n=>{[...w.current][g.current]?.focus(),u(n)}}),A=l.useRef(f);function H(n){const d=ss(f,n);$(n,d)}function X(n){$(n,g.current)}function U(){const n=A.current[g.current];f[g.current]!==n&&x(f)}function $(n,d,{commit:C}={commit:!1}){const R=os(h),z=is(Math.round((n-r)/h)*h+r,R),B=Re(z,[r,o]);M((P=[])=>{const T=es(P,B,d);if(ns(T,p*h)){g.current=T.indexOf(B);const i=String(T)!==String(P);return i&&C&&x(T),i?T:P}else return P})}return e.jsx(Wt,{scope:a.__scopeSlider,name:s,disabled:m,min:r,max:o,valueIndexToChangeRef:g,thumbs:w.current,values:f,orientation:t,form:j,children:e.jsx(ce.Provider,{scope:a.__scopeSlider,children:e.jsx(ce.Slot,{scope:a.__scopeSlider,children:e.jsx(b,{"aria-disabled":m,"data-disabled":m?"":void 0,...N,ref:c,onPointerDown:K(N.onPointerDown,()=>{m||(A.current=f)}),min:r,max:o,inverted:k,onSlideStart:m?void 0:H,onSlideMove:m?void 0:X,onSlideEnd:m?void 0:U,onHomeKeyDown:()=>!m&&$(r,0,{commit:!0}),onEndKeyDown:()=>!m&&$(o,f.length-1,{commit:!0}),onStepKeyDown:({event:n,direction:d})=>{if(!m){const z=Ee.includes(n.key)||n.shiftKey&&Pe.includes(n.key)?10:1,B=g.current,P=f[B],T=h*z*d;$(P+T,B,{commit:!0})}}})})})})});_e.displayName=O;var[Ae,ze]=Te(O,{startEdge:"left",endEdge:"right",size:"width",direction:1}),qt=l.forwardRef((a,c)=>{const{min:s,max:r,dir:o,inverted:h,onSlideStart:t,onSlideMove:m,onSlideEnd:p,onStepKeyDown:v,...y}=a,[u,x]=l.useState(null),k=F(c,b=>x(b)),j=l.useRef(void 0),N=tt(o),w=N==="ltr",g=w&&!h||!w&&h;function S(b){const f=j.current||u.getBoundingClientRect(),M=[0,f.width],H=ue(M,g?[s,r]:[r,s]);return j.current=f,H(b-f.left)}return e.jsx(Ae,{scope:a.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:e.jsx(Be,{dir:N,"data-orientation":"horizontal",...y,ref:k,style:{...y.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const f=S(b.clientX);t?.(f)},onSlideMove:b=>{const f=S(b.clientX);m?.(f)},onSlideEnd:()=>{j.current=void 0,p?.()},onStepKeyDown:b=>{const M=Ie[g?"from-left":"from-right"].includes(b.key);v?.({event:b,direction:M?-1:1})}})})}),Gt=l.forwardRef((a,c)=>{const{min:s,max:r,inverted:o,onSlideStart:h,onSlideMove:t,onSlideEnd:m,onStepKeyDown:p,...v}=a,y=l.useRef(null),u=F(c,y),x=l.useRef(void 0),k=!o;function j(N){const w=x.current||y.current.getBoundingClientRect(),g=[0,w.height],b=ue(g,k?[r,s]:[s,r]);return x.current=w,b(N-w.top)}return e.jsx(Ae,{scope:a.__scopeSlider,startEdge:k?"bottom":"top",endEdge:k?"top":"bottom",size:"height",direction:k?1:-1,children:e.jsx(Be,{"data-orientation":"vertical",...v,ref:u,style:{...v.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:N=>{const w=j(N.clientY);h?.(w)},onSlideMove:N=>{const w=j(N.clientY);t?.(w)},onSlideEnd:()=>{x.current=void 0,m?.()},onStepKeyDown:N=>{const g=Ie[k?"from-bottom":"from-top"].includes(N.key);p?.({event:N,direction:g?-1:1})}})})}),Be=l.forwardRef((a,c)=>{const{__scopeSlider:s,onSlideStart:r,onSlideMove:o,onSlideEnd:h,onHomeKeyDown:t,onEndKeyDown:m,onStepKeyDown:p,...v}=a,y=G(O,s);return e.jsx(Y.span,{...v,ref:c,onKeyDown:K(a.onKeyDown,u=>{u.key==="Home"?(t(u),u.preventDefault()):u.key==="End"?(m(u),u.preventDefault()):Ee.concat(Pe).includes(u.key)&&(p(u),u.preventDefault())}),onPointerDown:K(a.onPointerDown,u=>{const x=u.target;x.setPointerCapture(u.pointerId),u.preventDefault(),y.thumbs.has(x)?x.focus():r(u)}),onPointerMove:K(a.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&o(u)}),onPointerUp:K(a.onPointerUp,u=>{const x=u.target;x.hasPointerCapture(u.pointerId)&&(x.releasePointerCapture(u.pointerId),h(u))})})}),He="SliderTrack",Le=l.forwardRef((a,c)=>{const{__scopeSlider:s,...r}=a,o=G(He,s);return e.jsx(Y.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:c})});Le.displayName=He;var le="SliderRange",Ve=l.forwardRef((a,c)=>{const{__scopeSlider:s,...r}=a,o=G(le,s),h=ze(le,s),t=l.useRef(null),m=F(c,t),p=o.values.length,v=o.values.map(x=>Ke(x,o.min,o.max)),y=p>1?Math.min(...v):0,u=100-Math.max(...v);return e.jsx(Y.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:m,style:{...a.style,[h.startEdge]:y+"%",[h.endEdge]:u+"%"}})});Ve.displayName=le;var de="SliderThumb",$e=l.forwardRef((a,c)=>{const s=Zt(a.__scopeSlider),[r,o]=l.useState(null),h=F(c,m=>o(m)),t=l.useMemo(()=>r?s().findIndex(m=>m.ref.current===r):-1,[s,r]);return e.jsx(Qt,{...a,ref:h,index:t})}),Qt=l.forwardRef((a,c)=>{const{__scopeSlider:s,index:r,name:o,...h}=a,t=G(de,s),m=ze(de,s),[p,v]=l.useState(null),y=F(c,S=>v(S)),u=p?t.form||!!p.closest("form"):!0,x=St(p),k=t.values[r],j=k===void 0?0:Ke(k,t.min,t.max),N=ts(r,t.values.length),w=x?.[m.size],g=w?as(w,j,m.direction):0;return l.useEffect(()=>{if(p)return t.thumbs.add(p),()=>{t.thumbs.delete(p)}},[p,t.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[m.startEdge]:`calc(${j}% + ${g}px)`},children:[e.jsx(ce.ItemSlot,{scope:a.__scopeSlider,children:e.jsx(Y.span,{role:"slider","aria-label":a["aria-label"]||N,"aria-valuemin":t.min,"aria-valuenow":k,"aria-valuemax":t.max,"aria-orientation":t.orientation,"data-orientation":t.orientation,"data-disabled":t.disabled?"":void 0,tabIndex:t.disabled?void 0:0,...h,ref:y,style:k===void 0?{display:"none"}:a.style,onFocus:K(a.onFocus,()=>{t.valueIndexToChangeRef.current=r})})}),u&&e.jsx(Ue,{name:o??(t.name?t.name+(t.values.length>1?"[]":""):void 0),form:t.form,value:k},r)]})});$e.displayName=de;var Jt="RadioBubbleInput",Ue=l.forwardRef(({__scopeSlider:a,value:c,...s},r)=>{const o=l.useRef(null),h=F(o,r),t=Nt(c);return l.useEffect(()=>{const m=o.current;if(!m)return;const p=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(p,"value").set;if(t!==c&&y){const u=new Event("input",{bubbles:!0});y.call(m,c),m.dispatchEvent(u)}},[t,c]),e.jsx(Y.input,{style:{display:"none"},...s,ref:h,defaultValue:c})});Ue.displayName=Jt;function es(a=[],c,s){const r=[...a];return r[s]=c,r.sort((o,h)=>o-h)}function Ke(a,c,s){const h=100/(s-c)*(a-c);return Re(h,[0,100])}function ts(a,c){return c>2?`Value ${a+1} of ${c}`:c===2?["Minimum","Maximum"][a]:void 0}function ss(a,c){if(a.length===1)return 0;const s=a.map(o=>Math.abs(o-c)),r=Math.min(...s);return s.indexOf(r)}function as(a,c,s){const r=a/2,h=ue([0,50],[0,r]);return(r-h(c)*s)*s}function rs(a){return a.slice(0,-1).map((c,s)=>a[s+1]-c)}function ns(a,c){if(c>0){const s=rs(a);return Math.min(...s)>=c}return!0}function ue(a,c){return s=>{if(a[0]===a[1]||c[0]===c[1])return c[0];const r=(c[1]-c[0])/(a[1]-a[0]);return c[0]+r*(s-a[0])}}function os(a){return(String(a).split(".")[1]||"").length}function is(a,c){const s=Math.pow(10,c);return Math.round(a*s)/s}var cs=_e,ls=Le,ds=Ve,hs=$e;function ie({className:a,defaultValue:c,value:s,min:r=0,max:o=100,...h}){const t=l.useMemo(()=>Array.isArray(s)?s:Array.isArray(c)?c:[r,o],[s,c,r,o]);return e.jsxs(cs,{"data-slot":"slider",defaultValue:c,value:s,min:r,max:o,className:ee("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",a),...h,children:[e.jsx(ls,{"data-slot":"slider-track",className:ee("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(ds,{"data-slot":"slider-range",className:ee("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:t.length},(m,p)=>e.jsx(hs,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},p))]})}const Fe=({imageSrc:a,onCrop:c,onCancel:s,onRetake:r})=>{const o=l.useRef(null),h=l.useRef(null),[t,m]=l.useState({x:100,y:100,width:300,height:200}),[p,v]=l.useState(1),[y,u]=l.useState(!1),[x,k]=l.useState({x:0,y:0}),[j,N]=l.useState({width:0,height:0}),w=l.useRef(null);l.useEffect(()=>{const n=new Image;n.onload=()=>{w.current=n,N({width:n.width,height:n.height});const d=Math.min(n.width*.7,400),C=Math.min(n.height*.5,300);m({x:(n.width-d)/2,y:(n.height-C)/2,width:d,height:C})},n.src=a},[a]);const g=l.useCallback(()=>{const n=o.current,d=n?.getContext("2d"),C=w.current;if(!n||!d||!C)return;d.clearRect(0,0,n.width,n.height);const R=h.current;R&&(n.width=R.clientWidth,n.height=R.clientHeight);const z=n.width/n.height,B=C.width/C.height;let P,T,i,I;B>z?(P=n.width,T=n.width/B,i=0,I=(n.height-T)/2):(T=n.height,P=n.height*B,i=(n.width-P)/2,I=0),P*=p,T*=p,i=(n.width-P)/2,I=(n.height-T)/2,d.drawImage(C,i,I,P,T),d.strokeStyle="#3b82f6",d.lineWidth=3,d.setLineDash([5,5]),d.strokeRect(t.x,t.y,t.width,t.height),d.fillStyle="#3b82f6";const D=12;d.fillRect(t.x-D/2,t.y-D/2,D,D),d.fillRect(t.x+t.width-D/2,t.y-D/2,D,D),d.fillRect(t.x-D/2,t.y+t.height-D/2,D,D),d.fillRect(t.x+t.width-D/2,t.y+t.height-D/2,D,D),d.fillStyle="rgba(0, 0, 0, 0.7)",d.fillRect(t.x,t.y-30,t.width,25),d.fillStyle="white",d.font="12px Arial",d.textAlign="center",d.fillText("Drag to position | Pinch to resize",t.x+t.width/2,t.y-10)},[t,p]);l.useEffect(()=>{g()},[g]);const S=n=>{const d=o.current?.getBoundingClientRect();if(!d)return;const C=n.clientX-d.left,R=n.clientY-d.top;C>=t.x&&C<=t.x+t.width&&R>=t.y&&R<=t.y+t.height&&(u(!0),k({x:C-t.x,y:R-t.y}),n.preventDefault())},b=n=>{if(!y)return;const d=o.current?.getBoundingClientRect();if(!d)return;const C=n.clientX-d.left-x.x,R=n.clientY-d.top-x.y,z=o.current.width-t.width,B=o.current.height-t.height;m(P=>({...P,x:Math.max(0,Math.min(C,z)),y:Math.max(0,Math.min(R,B))}))},f=()=>{u(!1)},M=n=>{const d=o.current?.getBoundingClientRect();if(!d)return;const C=n.touches[0],R=C.clientX-d.left,z=C.clientY-d.top;R>=t.x&&R<=t.x+t.width&&z>=t.y&&z<=t.y+t.height&&(u(!0),k({x:R-t.x,y:z-t.y}),n.preventDefault())},A=n=>{if(!y||n.touches.length!==1)return;const d=o.current?.getBoundingClientRect();if(!d)return;const C=n.touches[0],R=C.clientX-d.left-x.x,z=C.clientY-d.top-x.y,B=o.current.width-t.width,P=o.current.height-t.height;m(T=>({...T,x:Math.max(0,Math.min(R,B)),y:Math.max(0,Math.min(z,P))})),n.preventDefault()},H=()=>{u(!1)},X=()=>{const n=document.createElement("canvas"),d=n.getContext("2d"),C=w.current;if(!d||!C)return;n.width=t.width,n.height=t.height,d.drawImage(C,t.x,t.y,t.width,t.height,0,0,t.width,t.height);const R=n.toDataURL("image/jpeg",.9);c(R)},U=()=>{if(!w.current)return;const n=Math.min(w.current.width*.7,400),d=Math.min(w.current.height*.5,300);m({x:(w.current.width-n)/2,y:(w.current.height-d)/2,width:n,height:d}),v(1)},$=n=>{const C=Math.min(j.width,j.height)*.9;m(R=>({...R,width:Math.max(100,Math.min(R.width+n,C)),height:Math.max(100,Math.min(R.height+n,C)),x:Math.max(0,R.x-n/2),y:Math.max(0,R.y-n/2)}))};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Adjust the crop area to focus on the barcode. Drag to move, use controls to resize."}),e.jsx("div",{ref:h,className:"relative border-2 border-gray-300 rounded-lg overflow-hidden bg-gray-900",style:{height:"400px",touchAction:"none"},children:e.jsx("canvas",{ref:o,className:"absolute inset-0 cursor-move",onMouseDown:S,onMouseMove:b,onMouseUp:f,onMouseLeave:f,onTouchStart:M,onTouchMove:A,onTouchEnd:H,onTouchCancel:H})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium",children:"Zoom"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(p*100),"%"]})]}),e.jsx(ie,{value:[p],min:.5,max:3,step:.1,onValueChange:([n])=>v(n),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium",children:"Crop Size"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:()=>$(-20),disabled:t.width<=100,children:e.jsx(Xt,{className:"w-4 h-4"})}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>$(20),disabled:t.width>=Math.min(j.width,j.height)*.9,children:e.jsx(Ft,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Width: ",Math.round(t.width),"px"]}),e.jsx(ie,{value:[t.width],min:100,max:Math.min(j.width,800),step:10,onValueChange:([n])=>m(d=>({...d,width:n}))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Height: ",Math.round(t.height),"px"]}),e.jsx(ie,{value:[t.height],min:50,max:Math.min(j.height,600),step:10,onValueChange:([n])=>m(d=>({...d,height:n}))})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(E,{variant:"outline",onClick:U,className:"flex-1 gap-2",children:[e.jsx(Vt,{className:"w-4 h-4"}),"Reset"]}),e.jsxs(E,{variant:"outline",onClick:r,className:"flex-1 gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),"Retake"]}),e.jsxs(E,{onClick:X,className:"flex-1 gap-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx(It,{className:"w-4 h-4"}),"Crop & Scan"]})]}),e.jsx("div",{className:"text-xs text-gray-500 text-center pt-2",children:"Tip: Make the crop area just big enough to fit the barcode"})]})]})},ms=({onScan:a,onError:c,active:s})=>{const r=l.useRef(null),o=l.useRef(null),[h,t]=l.useState(!0),[m,p]=l.useState(null),[v,y]=l.useState(0),u=2e3;return l.useEffect(()=>{let x=!0;return(async()=>{if(!s){if(o.current)try{o.current.reset()}catch(j){console.error("Error resetting scanner:",j)}t(!0),p(null);return}try{if(t(!0),p(null),!window.ZXing){const S=document.createElement("script");S.src="https://cdn.jsdelivr.net/npm/@zxing/library@latest/umd/index.min.js",document.head.appendChild(S),await new Promise((b,f)=>{S.onload=b,S.onerror=()=>f(new Error("Failed to load ZXing library")),setTimeout(()=>f(new Error("ZXing library load timeout")),1e4)})}if(!x||!r.current)return;const{BrowserMultiFormatReader:j}=window.ZXing;o.current=new j;const N=await o.current.listVideoInputDevices();if(!N||N.length===0)throw new Error("No camera devices found");let w=N[0]?.deviceId;const g=N.find(S=>S.label.toLowerCase().includes("back")||S.label.toLowerCase().includes("rear")||S.label.toLowerCase().includes("environment"));if(g&&(w=g.deviceId),!x||!r.current)return;await o.current.decodeFromVideoDevice(w,r.current,(S,b)=>{if(S&&x){const f=Date.now();if(f-v>u){const M=S.getText();console.log("Scan successful:",M),y(f),a(M)}}b&&b.name!=="NotFoundException"&&console.error("Decode error:",b)}),x&&t(!1)}catch(j){console.error("Scanner setup error:",j),x&&(p(j.message||"Failed to start camera"),t(!1),c(j))}})(),()=>{if(x=!1,o.current)try{o.current.reset()}catch(j){console.error("Error during cleanup:",j)}}},[s,a,c,v]),e.jsxs("div",{className:"relative w-full h-full bg-black",children:[e.jsx("video",{ref:r,className:"w-full h-full object-cover",playsInline:!0,muted:!0,autoPlay:!0}),h&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-75",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(q,{className:"w-12 h-12 mx-auto mb-4 animate-pulse"}),e.jsx("p",{children:"Starting camera..."}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Please allow camera access"})]})}),m&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-75",children:e.jsxs("div",{className:"text-center text-white p-4",children:[e.jsx(me,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),e.jsx("p",{className:"font-semibold mb-2",children:"Camera Error"}),e.jsx("p",{className:"text-sm text-gray-300",children:m}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Please check camera permissions or use alternative methods"})]})}),!h&&!m&&e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-64 h-64 border-4 border-white opacity-50 rounded-lg"})}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:e.jsx("p",{className:"text-white text-sm bg-black bg-opacity-50 inline-block px-4 py-2 rounded",children:"Position barcode/QR code within the frame"})})]})]})},us=({onScan:a,onError:c})=>{const s=l.useRef(null),[r,o]=l.useState(!1),[h,t]=l.useState(null),[m,p]=l.useState(!1),[v,y]=l.useState(null),u=()=>{y(null),s.current?.click()},x=async w=>{const g=w.target.files?.[0];if(!g)return;if(!g.type.startsWith("image/")){_.error("Invalid file type",{description:"Please take a photo with your camera"});return}o(!0);const S=new FileReader;S.onload=async b=>{const f=b.target?.result;t(f),p(!0),o(!1)},S.onerror=()=>{o(!1),_.error("Failed to read photo"),y("Failed to load image")},S.readAsDataURL(g)},k=async w=>{o(!0),p(!1);try{if(!window.ZXing){const M=document.createElement("script");M.src="https://cdn.jsdelivr.net/npm/@zxing/library@latest/umd/index.min.js",document.head.appendChild(M),await new Promise((A,H)=>{M.onload=A,M.onerror=()=>H(new Error("Failed to load ZXing library"))})}const{BrowserMultiFormatReader:g}=window.ZXing,S=new g,b=new Image;b.src=w,await new Promise((M,A)=>{b.onload=M,b.onerror=A});const f=await S.decodeFromImageElement(b);if(f)console.log("Cropped image scan successful:",f.getText()),a(f.getText()),_.success("Barcode decoded successfully"),t(null),s.current&&(s.current.value="");else throw new Error("No barcode found in the cropped area")}catch(g){console.error("Cropped image scan error:",g),_.error("Failed to scan cropped image",{description:g.message||"No barcode found. Try adjusting the crop area."}),y(g.message||"Scan failed"),p(!0),c(g)}finally{o(!1)}},j=()=>{t(null),p(!1),y(null),s.current&&(s.current.value=""),setTimeout(()=>{u()},100)},N=()=>{t(null),p(!1),y(null),s.current&&(s.current.value="")};return e.jsxs("div",{className:"space-y-4",children:[m&&h?e.jsx(Fe,{imageSrc:h,onCrop:k,onCancel:N,onRetake:j}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-4 text-center",children:"Take a photo of the barcode, then crop to focus on just the barcode area."}),v&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("p",{className:"text-sm font-medium",children:"Scan Error"})]}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:v})]}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Me,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Open your mobile camera to take a photo"}),e.jsx("p",{className:"text-xs text-gray-500 mb-6",children:"Works on HTTP connections. Crop the image to focus on barcode."}),e.jsxs(E,{onClick:u,disabled:r,className:"gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),r?"Loading...":"Open Mobile Camera"]})]})})]}),e.jsx("input",{ref:s,type:"file",accept:"image/*",capture:"environment",onChange:x,className:"hidden"}),r&&!m&&e.jsx("div",{className:"text-center text-sm text-gray-600",children:e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 animate-spin"}),"Processing..."]})}),!m&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[e.jsx("p",{className:"font-medium mb-1",children:"Tips for better scanning:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Ensure good lighting on the barcode"}),e.jsx("li",{children:"• Hold camera steady"}),e.jsx("li",{children:"• Fill most of the frame with barcode"}),e.jsx("li",{children:"• After taking photo, crop to just the barcode area"})]})]})]})},xs=({onScan:a,onError:c})=>{const s=l.useRef(null),[r,o]=l.useState(!1),[h,t]=l.useState(null),[m,p]=l.useState(null),[v,y]=l.useState(!1),u=async w=>{const g=w.target.files?.[0];if(!g)return;if(!g.type.startsWith("image/")){_.error("Invalid file type",{description:"Please upload an image file"});return}o(!0);const S=new FileReader;S.onload=async b=>{const f=b.target?.result;t(f),p(f),y(!0),o(!1)},S.onerror=()=>{o(!1),_.error("Failed to read file")},S.readAsDataURL(g)},x=async w=>{o(!0),y(!1);try{if(!window.ZXing){const M=document.createElement("script");M.src="https://cdn.jsdelivr.net/npm/@zxing/library@latest/umd/index.min.js",document.head.appendChild(M),await new Promise((A,H)=>{M.onload=A,M.onerror=()=>H(new Error("Failed to load ZXing library"))})}const{BrowserMultiFormatReader:g}=window.ZXing,S=new g,b=new Image;b.src=w,await new Promise(M=>{b.onload=M});const f=await S.decodeFromImageElement(b);if(f)console.log("Uploaded image scan successful:",f.getText()),a(f.getText()),_.success("Barcode decoded successfully"),t(null),p(null);else throw new Error("No barcode found in image")}catch(g){console.error("Uploaded image scan error:",g),_.error("Failed to scan image",{description:g.message||"No barcode found in the image"}),c(g),y(!0)}finally{o(!1)}},k=()=>{t(null),p(null),y(!1),s.current&&(s.current.value="")},j=()=>{t(null),p(null),y(!1),s.current&&(s.current.value=""),setTimeout(()=>{s.current?.click()},100)},N=()=>{y(!1)};return e.jsxs("div",{className:"space-y-4",children:[v&&m?e.jsx(Fe,{imageSrc:m,onCrop:x,onCancel:N,onRetake:j}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-4 text-center",children:"Upload an image, then crop to focus on just the barcode area."}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8",children:h?e.jsxs("div",{className:"space-y-4",children:[e.jsx("img",{src:h,alt:"Uploaded barcode",className:"max-h-64 mx-auto rounded"}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(E,{variant:"outline",onClick:k,disabled:r,children:"Clear"}),e.jsx(E,{onClick:()=>y(!0),disabled:r,children:"Crop & Scan"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(zt,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload an image containing a barcode or QR code"}),e.jsxs(E,{onClick:()=>s.current?.click(),disabled:r,className:"gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),"Choose Image"]})]})})]}),e.jsx("input",{ref:s,type:"file",accept:"image/*",onChange:u,className:"hidden"}),r&&!v&&e.jsx("div",{className:"text-center text-sm text-gray-600",children:e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 animate-spin"}),"Scanning image..."]})}),!v&&e.jsx("div",{className:"text-xs text-gray-500 text-center",children:"Supports JPG, PNG, and most common image formats. Crop to isolate barcode for better accuracy."})]})};function $s({products:a,connections:c,activeConnection:s,activeTable:r,fields:o,idField:h,editableFields:t,inputTypes:m}){const[p,v]=l.useState(!1),[y,u]=l.useState("camera"),[x,k]=l.useState(""),[j,N]=l.useState([]),[w,g]=l.useState(!1),[S,b]=l.useState(!1),[f,M]=l.useState(!0),A=l.useRef(null);l.useEffect(()=>{M(window.location.protocol==="https:")},[]);const H=i=>{L.get("/product",{conn:i,table:c.find(I=>I.id.toString()===i)?.tables?.[0]?.id||null},{preserveState:!0})},X=i=>{L.get("/product",{conn:s.id,table:i},{preserveState:!0})},U=i=>{console.log("Scanned code received:",i),k(i),_.success("Scanned successfully",{description:`Searching for: ${i}`}),L.get("/product",{search:i,conn:s.id,table:r.id},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{console.log("Search completed for:",i)},onError:I=>{console.error("Search error:",I),_.error("Search failed",{description:"Unable to perform search with scanned code"})}}),setTimeout(()=>{v(!1)},500)},$=()=>{f?u("camera"):(u("mobile"),_.info("Using mobile camera mode",{description:"HTTP connections use mobile camera with cropping"})),k(""),v(!0)},n=i=>{k(i),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{i.trim()!==""?L.get("/product",{search:i,conn:s.id,table:r.id},{preserveState:!0,preserveScroll:!0}):L.get("/product",{conn:s.id,table:r.id},{preserveState:!0,preserveScroll:!0})},500)},d=()=>{k(""),L.get("/product",{conn:s.id,table:r.id},{preserveState:!0,preserveScroll:!0})},C=i=>{L.post("/product/search",{table_id:r.id,connection_id:s.id,[h]:i[h]})},R=i=>{const I=i[h];L.delete("/product/delete",{data:{table_id:r.id,connection_id:s.id,[h]:I},onSuccess:()=>{_.success("Product deleted",{description:`${h}: ${I} has been removed`})}})},z=()=>{if(j.length===0){_.error("No items selected");return}confirm(`Delete ${j.length} selected items?`)&&(L.delete("/product/bulk-delete",{data:{table_id:r.id,connection_id:s.id,rows:j}}),N([]),_.success("Bulk deletion completed",{description:`${j.length} items deleted`}))},B=i=>{N(I=>I.includes(i)?I.filter(D=>D!==i):[...I,i])},P=()=>{j.length===a.data.length?N([]):N(a.data.map(i=>i[h]))},T=()=>{L.reload({preserveScroll:!0,preserveState:!0,onSuccess:()=>{_.success("Data refreshed")}})};return l.useEffect(()=>()=>{A.current&&clearTimeout(A.current)},[]),e.jsxs(st,{children:[e.jsx(Oe,{title:`${r.name} - Products`}),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[e.jsx("div",{className:"border-b bg-white dark:bg-black",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),"Back"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ne,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:r.name}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),s.name]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:r.table_name}),e.jsx("span",{children:"•"}),e.jsxs(Z,{variant:"outline",className:"text-xs",children:[a?.data?.length," records"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(je,{value:s.id.toString(),onValueChange:H,children:[e.jsx(ye,{className:"w-48",children:e.jsx(we,{children:s.name})}),e.jsx(be,{children:c.map(i=>e.jsx(ve,{value:i.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4"}),i.name]})},i.id))})]}),e.jsxs(je,{value:r.id.toString(),onValueChange:X,children:[e.jsx(ye,{className:"w-48",children:e.jsx(we,{children:r.name})}),e.jsx(be,{children:s.tables.map(i=>e.jsx(ve,{value:i.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),i.name]})},i.id))})]}),e.jsxs(E,{variant:"outline",onClick:T,className:"gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Refresh"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(ge,{className:"mb-6",children:[e.jsx(Xe,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(Ze,{children:"Product Records"}),e.jsxs(Ye,{children:["Manage ",r.name," table in ",s.database]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j.length>0&&e.jsxs(E,{variant:"destructive",size:"sm",onClick:z,className:"gap-2",children:[e.jsx(oe,{className:"w-4 h-4"}),"Delete Selected (",j.length,")"]}),e.jsxs(ct,{open:p,onOpenChange:v,children:[e.jsx(lt,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:"gap-2",onClick:$,children:[e.jsx(Ht,{className:"w-4 h-4"}),"Scan Barcode"]})}),e.jsxs(dt,{className:"max-w-2xl",children:[e.jsxs(ht,{children:[e.jsx(mt,{children:"Scan Barcode/QR Code"}),e.jsx(ut,{children:"Choose your preferred scanning method"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Or enter barcode manually:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(fe,{placeholder:"Enter barcode/QR code",value:x,onChange:i=>k(i.target.value)}),e.jsx(E,{onClick:()=>{x.trim()&&U(x)},disabled:!x.trim(),children:"Search"})]})]}),e.jsxs(Qe,{value:y,onValueChange:i=>u(i),children:[e.jsxs(Je,{className:"grid w-full grid-cols-3",children:[e.jsxs(te,{value:"camera",disabled:!f,children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Live Scanner",!f&&e.jsx(Z,{variant:"outline",className:"ml-2 text-xs",children:"HTTPS Only"})]}),e.jsxs(te,{value:"mobile",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Mobile Camera"]}),e.jsxs(te,{value:"upload",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Upload Image"]})]}),e.jsx(se,{value:"camera",className:"mt-4",children:f?e.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden",children:e.jsx(ms,{onScan:U,onError:i=>{_.error("Scanner Error",{description:i.message})},active:p&&y==="camera"})}):e.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(Dt,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Live scanner requires HTTPS"}),e.jsx("p",{className:"text-xs text-gray-500",children:'Please use "Mobile Camera" or "Upload Image" tabs'})]})})}),e.jsx(se,{value:"mobile",className:"mt-4",children:e.jsx(us,{onScan:U,onError:i=>{console.error("Mobile camera error:",i),_.error("Camera Error",{description:i.message})}})}),e.jsx(se,{value:"upload",className:"mt-4",children:e.jsx(xs,{onScan:U,onError:i=>{console.error("Image scan error:",i)}})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-gray-500",children:x&&e.jsxs("span",{children:["Search for: ",e.jsx("strong",{className:"font-mono",children:x})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",onClick:()=>{k(""),v(!1)},children:"Cancel"}),e.jsx(E,{onClick:()=>{x.trim()?U(x):v(!1)},children:x.trim()?"Search":"Close"})]})]})]})]}),e.jsx(E,{asChild:!0,children:e.jsxs(xe,{href:`/product/create?conn=${s.id}&table=${r.id}`,className:"gap-2",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Add New"]})})]})]})}),e.jsxs(pe,{children:[e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:e.jsx("div",{className:"flex-1 relative",children:e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(fe,{placeholder:`Search in ${o.join(", ")}`,value:x,onChange:i=>n(i.target.value),className:"pl-10 pr-10"}),x&&e.jsx(E,{variant:"ghost",size:"sm",onClick:d,className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",children:e.jsx(me,{className:"w-4 h-4"})})]})})}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(We,{children:[e.jsx(qe,{children:e.jsxs(Q,{children:[e.jsx(J,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:j.length===a?.data?.length&&a?.data?.length>0,onChange:P,className:"rounded"})}),o.map(i=>e.jsx(J,{className:"font-semibold",children:e.jsxs("div",{className:"flex items-center gap-2",children:[i,i===h&&e.jsx(Z,{variant:"outline",className:"text-xs",children:"ID"})]})},i)),e.jsx(J,{className:"text-right",children:"Actions"})]})}),e.jsx(Ge,{children:a?.data?.length>0?a.data.map((i,I)=>e.jsxs(Q,{className:"hover:bg-gray-50 dark:bg-black group",children:[e.jsx(W,{children:e.jsx("input",{type:"checkbox",checked:j.includes(i[h]),onChange:()=>B(i[h]),className:"rounded"})}),o.map(D=>e.jsx(W,{children:e.jsx("div",{className:"max-w-xs truncate",title:String(i[D]||""),children:String(i[D]||"")})},D)),e.jsx(W,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>C(i),className:"gap-1",children:[e.jsx(ke,{className:"w-3 h-3"}),"Edit"]}),e.jsxs(Se,{children:[e.jsx(Ne,{asChild:!0,children:e.jsxs(E,{size:"sm",variant:"destructive",className:"gap-1",children:[e.jsx(oe,{className:"w-3 h-3"}),"Delete"]})}),e.jsxs(xt,{children:[e.jsxs(gt,{children:[e.jsx(pt,{children:"Delete Product"}),e.jsx(ft,{children:"Are you sure you want to delete this record? This action cannot be undone."})]}),e.jsxs(jt,{children:[e.jsx(yt,{children:"Cancel"}),e.jsx(wt,{onClick:()=>R(i),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]}),e.jsxs(at,{children:[e.jsx(rt,{asChild:!0,children:e.jsx(E,{size:"sm",variant:"ghost",children:e.jsx(_t,{className:"w-4 h-4"})})}),e.jsxs(nt,{align:"end",children:[e.jsx(ot,{children:"Actions"}),e.jsxs(re,{onClick:()=>C(i),children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(re,{onClick:()=>{navigator.clipboard.writeText(i[h]),_.success("Copied to clipboard",{description:`${h}: ${i[h]}`})},children:[e.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Copy ID"]}),e.jsx(it,{}),e.jsx(Se,{children:e.jsx(Ne,{asChild:!0,children:e.jsxs(re,{className:"text-red-600",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Delete"]})})})]})]})]})})]},I)):e.jsx(Q,{children:e.jsx(W,{colSpan:o.length+2,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(ne,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:x?"No results match your search.":"Start by adding your first product."}),e.jsx(E,{asChild:!0,children:e.jsxs(xe,{href:`/product/create?conn=${s.id}&table=${r.id}`,children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Add Product"]})})]})})})})]})}),a.links&&a.links.length>3&&e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",a.data.length," of many records"]}),e.jsx("div",{className:"flex gap-1",children:a.links.map((i,I)=>e.jsx("button",{onClick:()=>i.url&&L.get(i.url,{},{preserveState:!0}),className:`px-3 py-1 rounded ${i.active?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 hover:bg-gray-200"} ${i.url?"":"opacity-50 cursor-not-allowed"}`,disabled:!i.url,dangerouslySetInnerHTML:{__html:i.label}},I))})]})]})]}),e.jsx(ge,{children:e.jsx(pe,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ae,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.database," @ ",s.host,":",s.port]})]})]}),e.jsx("div",{className:"text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:["Table: ",e.jsx("strong",{children:r.table_name})]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Fields: ",e.jsx(Z,{variant:"outline",children:o.length})]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Editable: ",e.jsx(Z,{variant:"outline",children:t.length})]})]})})]})})})]})]})]})}export{$s as default};
