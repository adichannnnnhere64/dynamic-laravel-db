import{u as q,r as g,j as e,H as z,a as N}from"./app-XWhQqadr.js";import{A as R,D as o,X,t as f}from"./app-layout-DK-K0ldS.js";import{C as b,a as $,c as v,e as J}from"./card-BC2beU6n.js";import{S as y,a as w,b as C,c as S,d as _}from"./select-DMsJnDhb.js";import{L as M}from"./label-CtP53-kG.js";import{I as c}from"./input-Cnzh85aL.js";import{B as p}from"./app-logo-icon-B7LppR46.js";import{T as Q}from"./textarea-CKbhdfc4.js";import{B as k}from"./badge-wqhiCemZ.js";import{C as U}from"./chevron-left-COkYFADB.js";import{P as W}from"./plus-DocT6HnM.js";import{G as h}from"./grid-3x3-BAFDwy94.js";import{C as T}from"./circle-alert-BwOxeT-v.js";import{S as Y}from"./save-DW8RlCGe.js";/* empty css            */import"./index-C65szwza.js";import"./index-CfglRrGE.js";import"./index-U8uxxASO.js";import"./loader-circle-BlAfInud.js";import"./index-bKkIkAu6.js";import"./check-n2-JkkFX.js";function fe({connections:d,connection:a,table:t}){const{data:I,setData:D,post:F,processing:n,errors:j,reset:A}=q({table_id:t.id,connection_id:a.id,[t.primary_key]:"",...Object.fromEntries(t.editable_fields.map(s=>[s,""]))}),[m,B]=g.useState(a.id.toString()),[E,u]=g.useState(t.id.toString()),x=t.primary_key_auto_increment||!1,L=s=>{B(s);const i=d.find(l=>l.id.toString()===s);if(i?.tables?.length>0){const l=i.tables[0];u(l.id.toString()),N.get("/product/create",{conn:s,table:l.id},{preserveState:!0})}},P=s=>{u(s),N.get("/product/create",{conn:m,table:s},{preserveState:!0})},H=s=>{s.preventDefault(),F("/product/store",{preserveScroll:!0,onSuccess:()=>{f.success("Product Created",{description:"New product has been added successfully"}),A()},onError:()=>{f.error("Creation Failed",{description:"Please check the form for errors"})}})},V=(s,i=!1)=>{const l=t.input_types[s]||"text",G=I[s]??"",r={id:s,value:G,onChange:O=>D(s,O.target.value),placeholder:i&&x?"Auto-generated":`Enter ${s}`,disabled:n||i&&x,className:"w-full mt-2",required:i&&!x,readOnly:!1};switch(l){case"textarea":return e.jsx(Q,{...r});case"number":return e.jsx(c,{type:"number",...r});case"email":return e.jsx(c,{type:"email",...r});case"date":return e.jsx(c,{type:"date",...r});case"datetime-local":return e.jsx(c,{type:"datetime-local",...r});case"time":return e.jsx(c,{type:"time",...r});default:return e.jsx(c,{type:"text",...r})}};return e.jsxs(R,{children:[e.jsx(z,{title:"Create"}),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[e.jsx("div",{className:"border-b bg-white dark:bg-black",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(p,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Back"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(W,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Create"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(o,{className:"w-3 h-3 mr-1"}),a.name]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(h,{className:"w-3 h-3 mr-1"}),t.name]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(y,{value:m,onValueChange:L,children:[e.jsx(w,{className:"w-48",children:e.jsx(C,{children:a.name})}),e.jsx(S,{children:d.map(s=>e.jsx(_,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-4 h-4"}),s.name]})},s.id))})]}),e.jsxs(y,{value:E,onValueChange:P,children:[e.jsx(w,{className:"w-48",children:e.jsx(C,{children:t.name})}),e.jsx(S,{children:d.find(s=>s.id.toString()===m)?.tables.map(s=>e.jsx(_,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),s.name]})},s.id))||[]})]})]})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(b,{children:[e.jsx($,{}),e.jsx(v,{children:e.jsxs("form",{onSubmit:H,className:"space-y-2",children:[e.jsx("input",{type:"hidden",name:"table_id",value:t.id}),e.jsx("input",{type:"hidden",name:"connection_id",value:a.id}),t.editable_fields.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Details"})}),e.jsxs(k,{variant:"outline",children:[t.editable_fields.length," fields"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.editable_fields.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:s,className:"font-medium",children:e.jsxs("div",{className:"flex items-center justify-between",children:[s,t.input_types[s]&&e.jsx(k,{variant:"outline",className:"ml-2 text-xs",children:t.input_types[s]})]})}),V(s),j[s]&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",children:[e.jsx(T,{className:"w-4 h-4"}),j[s]]})]},s))})]}):e.jsxs("div",{className:"text-center py-8 border rounded-lg bg-gray-50 dark:bg-black",children:[e.jsx(T,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No editable fields configured for this table"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Configure editable fields in table settings"})]}),e.jsx(J,{className:"px-0 pb-0 pt-6",children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs(p,{type:"button",variant:"outline",onClick:()=>window.history.back(),disabled:n,children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsx(p,{type:"submit",disabled:n,className:"gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4"}),"Create Item"]})})]})})]})})]}),e.jsx(b,{className:"mt-6",children:e.jsx(v,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Database"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(o,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-mono text-sm",children:a.database})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Table"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(h,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-mono text-sm",children:t.table_name})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Connection"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[a.host,":",a.port]})]})]})})})]})]})]})}export{fe as default};
