import{u as H,r as I,j as e,H as R,a as T}from"./app-AyFvkLHt.js";import{A,X as M}from"./app-layout-PBchuoGo.js";import{C as N,a as P,c as y,e as $}from"./card-DNNRQXi0.js";import{S as O,a as z,b as G,c as U,d as V}from"./select-lit_ok_P.js";import{L as q}from"./label-B37TrHeA.js";import{I as l}from"./input-C_JYf3hS.js";import{c as w,B as n}from"./app-logo-icon-BK4IrVPS.js";import{S as X,T as J}from"./textarea-Bgf_mVFr.js";import{B as x}from"./badge-DoPJFvVb.js";import{C as Q,D as o,G as g,t as v}from"./index-BBHJi-10.js";import{E as W}from"./eye-CJWeJsAW.js";import{R as f}from"./refresh-cw-CaQpniRf.js";import{C as b}from"./circle-alert-CF9C0wI8.js";/* empty css            */import"./index-R3WdzqYN.js";import"./index-fdDaLK-D.js";import"./index-CSpiwRm-.js";import"./index-DQM44TCQ.js";import"./check-BBWKwXqn.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Z=w("CircleCheckBig",Y);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ee=w("History",K);function ve({product:i,table:a,connection:t,connections:h}){const{data:p,setData:C,post:_,processing:c,errors:j,reset:u}=H({table_id:a.id,connection_id:t.id,[a.primary_key]:i[a.primary_key]??"",...Object.fromEntries(a.editable_fields.map(s=>[s,i[s]??""]))}),[k,S]=I.useState(t.id.toString()),E=s=>{S(s),h.find(d=>d.id.toString()===s)&&T.visit("/product",{data:{conn:s}})},B=s=>{s.preventDefault(),_("/product/update",{preserveScroll:!0,onSuccess:()=>{v.success("Product Updated",{description:"Changes have been saved successfully"})},onError:()=>{v.error("Update Failed",{description:"Please check the form for errors"})}})},L=(s,m=!1)=>{const d=a.input_types[s]||"text",D=p[s]??"",r={id:s,value:D,onChange:F=>C(s,F.target.value),placeholder:`Enter ${s}`,disabled:c||m,className:"w-full mt-2",readOnly:m};switch(d){case"textarea":return e.jsx(J,{...r});case"number":return e.jsx(l,{type:"number",...r});case"email":return e.jsx(l,{type:"email",...r});case"date":return e.jsx(l,{type:"date",...r});case"datetime-local":return e.jsx(l,{type:"datetime-local",...r});case"time":return e.jsx(l,{type:"time",...r});default:return e.jsx(l,{type:"text",...r})}};return e.jsxs(A,{children:[e.jsx(R,{title:`Edit ${a.primary_key}: ${i[a.primary_key]}`}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"border-b bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Back"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(W,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Product"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(o,{className:"w-3 h-3 mr-1"}),t.name]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(g,{className:"w-3 h-3 mr-1"}),a.name]}),e.jsx("span",{children:"•"}),e.jsxs(x,{variant:"outline",className:"text-xs",children:[a.primary_key,": ",i[a.primary_key]]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(O,{value:k,onValueChange:E,children:[e.jsx(z,{className:"w-48",children:e.jsx(G,{children:t.name})}),e.jsx(U,{children:h.map(s=>e.jsx(V,{value:s.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-4 h-4"}),s.name]})},s.id))})]}),e.jsxs(n,{variant:"outline",onClick:()=>u(),disabled:c,className:"gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),"Reset"]})]})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(N,{children:[e.jsx(P,{}),e.jsx(y,{children:e.jsxs("form",{onSubmit:B,className:"space-y-8",children:[e.jsx("input",{type:"hidden",name:"table_id",value:a.id}),e.jsx("input",{type:"hidden",name:"connection_id",value:t.id}),a.editable_fields.length>0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Details"})]}),e.jsxs(x,{variant:"outline",children:[a.editable_fields.length," editable fields"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.editable_fields.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{htmlFor:s,className:"font-medium",children:s}),a.input_types[s]&&e.jsx(x,{variant:"outline",className:"text-xs",children:a.input_types[s]})]}),L(s),j[s]&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",children:[e.jsx(b,{className:"w-4 h-4"}),j[s]]}),i[s]!==p[s]&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[e.jsx(ee,{className:"w-3 h-3"}),e.jsx("span",{className:"font-medium",children:"Original:"}),e.jsx("span",{className:"truncate",children:i[s]||"(empty)"})]})]},s))})]}):e.jsxs("div",{className:"text-center py-8 border rounded-lg bg-gray-50",children:[e.jsx(b,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No editable fields configured for this table"})]}),e.jsx($,{className:"px-0 pb-0 pt-6",children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs(n,{type:"button",variant:"outline",onClick:()=>window.history.back(),disabled:c,children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{type:"button",variant:"outline",onClick:()=>u(),disabled:c,children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Reset"]}),e.jsx(n,{type:"submit",disabled:c,className:"gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4"}),"Save Changes"]})})]})]})})]})})]}),e.jsx(N,{className:"mt-6",children:e.jsx(y,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Database"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(o,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-mono text-sm",children:t.database})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Table"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-mono text-sm",children:a.table_name})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Connection"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[t.host,":",t.port]})]})]})})})]})]})]})}export{ve as default};
